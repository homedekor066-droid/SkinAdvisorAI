{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":49,"index":139}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":140},"end":{"line":3,"column":26,"index":166}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _expoSecureStore = require(_dependencyMap[2], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await SecureStore.getItemAsync('auth_token');\n        if (storedToken) {\n          setToken(storedToken);\n          await fetchUser(storedToken);\n        }\n      } catch (error) {\n        console.error('Failed to load auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const fetchUser = async authToken => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Failed to fetch user:', error);\n        await logout();\n      }\n    };\n    const login = async (email, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await SecureStore.setItemAsync('auth_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (name, email, password, language = 'en') => {\n      const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n        name,\n        email,\n        password,\n        language\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await SecureStore.setItemAsync('auth_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await SecureStore.deleteItemAsync('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    const updateProfile = async profile => {\n      if (!token) return;\n      const response = await axios.default.put(`${API_URL}/api/profile`, profile, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUser(response.data);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        await fetchUser(token);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":165,"map":[[30,2,36,0,"Object"],[30,8,36,0],[30,9,36,0,"defineProperty"],[30,23,36,0],[30,24,36,0,"exports"],[30,31,36,0],[31,4,36,0,"enumerable"],[31,14,36,0],[32,4,36,0,"get"],[32,7,36,0],[32,18,36,0,"get"],[32,19,36,0],[33,6,36,0],[33,13,36,0,"AuthProvider"],[33,25,36,0],[34,4,36,0],[35,2,36,0],[36,2,122,0,"Object"],[36,8,122,0],[36,9,122,0,"defineProperty"],[36,23,122,0],[36,24,122,0,"exports"],[36,31,122,0],[37,4,122,0,"enumerable"],[37,14,122,0],[38,4,122,0,"get"],[38,7,122,0],[38,18,122,0,"get"],[38,19,122,0],[39,6,122,0],[39,13,122,0,"useAuth"],[39,20,122,0],[40,4,122,0],[41,2,122,0],[42,2,128,2],[42,6,128,2,"_expoVirtualEnv"],[42,21,128,2],[42,24,128,2,"require"],[42,31,128,2],[42,32,128,2,"_dependencyMap"],[42,46,128,2],[43,2,1,0],[43,6,1,0,"_react"],[43,12,1,0],[43,15,1,0,"require"],[43,22,1,0],[43,23,1,0,"_dependencyMap"],[43,37,1,0],[44,2,2,0],[44,6,2,0,"_expoSecureStore"],[44,22,2,0],[44,25,2,0,"require"],[44,32,2,0],[44,33,2,0,"_dependencyMap"],[44,47,2,0],[45,2,2,0],[45,6,2,0,"SecureStore"],[45,17,2,0],[45,20,2,0,"_interopNamespace"],[45,37,2,0],[45,38,2,0,"_expoSecureStore"],[45,54,2,0],[46,2,3,0],[46,6,3,0,"_axios"],[46,12,3,0],[46,15,3,0,"require"],[46,22,3,0],[46,23,3,0,"_dependencyMap"],[46,37,3,0],[47,2,3,0],[47,6,3,0,"axios"],[47,11,3,0],[47,14,3,0,"_interopDefault"],[47,29,3,0],[47,30,3,0,"_axios"],[47,36,3,0],[48,2,3,26],[48,6,3,26,"_reactJsxDevRuntime"],[48,25,3,26],[48,28,3,26,"require"],[48,35,3,26],[48,36,3,26,"_dependencyMap"],[48,50,3,26],[49,2,5,0],[49,8,5,6,"API_URL"],[49,15,5,13],[49,18,5,16,"_expoVirtualEnv"],[49,33,5,16],[49,34,5,16,"env"],[49,37,5,16],[49,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[49,61,5,16],[49,65,5,55],[49,67,5,57],[50,2,34,0],[50,8,34,6,"AuthContext"],[50,19,34,17],[50,35,34,20],[50,39,34,20,"createContext"],[50,45,34,33],[50,46,34,33,"createContext"],[50,59,34,33],[50,61,34,63,"undefined"],[50,70,34,72],[50,71,34,73],[51,2,36,7],[51,8,36,13,"AuthProvider"],[51,20,36,25],[51,23,36,28,"AuthProvider"],[51,24,36,29],[52,4,36,31,"children"],[53,2,36,65],[53,3,36,66],[53,8,36,71],[54,4,36,71,"_s"],[54,6,36,71],[55,4,37,2],[55,10,37,8],[55,11,37,9,"user"],[55,15,37,13],[55,17,37,15,"setUser"],[55,24,37,22],[55,25,37,23],[55,28,37,26],[55,32,37,26,"useState"],[55,38,37,34],[55,39,37,34,"useState"],[55,47,37,34],[55,49,37,48],[55,53,37,52],[55,54,37,53],[56,4,38,2],[56,10,38,8],[56,11,38,9,"token"],[56,16,38,14],[56,18,38,16,"setToken"],[56,26,38,24],[56,27,38,25],[56,30,38,28],[56,34,38,28,"useState"],[56,40,38,36],[56,41,38,36,"useState"],[56,49,38,36],[56,51,38,52],[56,55,38,56],[56,56,38,57],[57,4,39,2],[57,10,39,8],[57,11,39,9,"isLoading"],[57,20,39,18],[57,22,39,20,"setIsLoading"],[57,34,39,32],[57,35,39,33],[57,38,39,36],[57,42,39,36,"useState"],[57,48,39,44],[57,49,39,44,"useState"],[57,57,39,44],[57,59,39,45],[57,63,39,49],[57,64,39,50],[58,4,41,2],[58,8,41,2,"useEffect"],[58,14,41,11],[58,15,41,11,"useEffect"],[58,24,41,11],[58,26,41,12],[58,32,41,18],[59,6,42,4,"loadStoredAuth"],[59,20,42,18],[59,21,42,19],[59,22,42,20],[60,4,43,2],[60,5,43,3],[60,7,43,5],[60,9,43,7],[60,10,43,8],[61,4,45,2],[61,10,45,8,"loadStoredAuth"],[61,24,45,22],[61,27,45,25],[61,33,45,25,"loadStoredAuth"],[61,34,45,25],[61,39,45,37],[62,6,46,4],[62,10,46,8],[63,8,47,6],[63,14,47,12,"storedToken"],[63,25,47,23],[63,28,47,26],[63,34,47,32,"SecureStore"],[63,45,47,43],[63,46,47,44,"getItemAsync"],[63,58,47,56],[63,59,47,57],[63,71,47,69],[63,72,47,70],[64,8,48,6],[64,12,48,10,"storedToken"],[64,23,48,21],[64,25,48,23],[65,10,49,8,"setToken"],[65,18,49,16],[65,19,49,17,"storedToken"],[65,30,49,28],[65,31,49,29],[66,10,50,8],[66,16,50,14,"fetchUser"],[66,25,50,23],[66,26,50,24,"storedToken"],[66,37,50,35],[66,38,50,36],[67,8,51,6],[68,6,52,4],[68,7,52,5],[68,8,52,6],[68,15,52,13,"error"],[68,20,52,18],[68,22,52,20],[69,8,53,6,"console"],[69,15,53,13],[69,16,53,14,"error"],[69,21,53,19],[69,22,53,20],[69,44,53,42],[69,46,53,44,"error"],[69,51,53,49],[69,52,53,50],[70,6,54,4],[70,7,54,5],[70,16,54,14],[71,8,55,6,"setIsLoading"],[71,20,55,18],[71,21,55,19],[71,26,55,24],[71,27,55,25],[72,6,56,4],[73,4,57,2],[73,5,57,3],[74,4,59,2],[74,10,59,8,"fetchUser"],[74,19,59,17],[74,22,59,20],[74,28,59,27,"authToken"],[74,37,59,44],[74,41,59,49],[75,6,60,4],[75,10,60,8],[76,8,61,6],[76,14,61,12,"response"],[76,22,61,20],[76,25,61,23],[76,31,61,29,"axios"],[76,36,61,34],[76,37,61,34,"default"],[76,44,61,34],[76,45,61,35,"get"],[76,48,61,38],[76,49,61,39],[76,52,61,42,"API_URL"],[76,59,61,49],[76,73,61,63],[76,75,61,65],[77,10,62,8,"headers"],[77,17,62,15],[77,19,62,17],[78,12,62,19,"Authorization"],[78,25,62,32],[78,27,62,34],[78,37,62,44,"authToken"],[78,46,62,53],[79,10,62,56],[80,8,63,6],[80,9,63,7],[80,10,63,8],[81,8,64,6,"setUser"],[81,15,64,13],[81,16,64,14,"response"],[81,24,64,22],[81,25,64,23,"data"],[81,29,64,27],[81,30,64,28],[82,6,65,4],[82,7,65,5],[82,8,65,6],[82,15,65,13,"error"],[82,20,65,18],[82,22,65,20],[83,8,66,6,"console"],[83,15,66,13],[83,16,66,14,"error"],[83,21,66,19],[83,22,66,20],[83,45,66,43],[83,47,66,45,"error"],[83,52,66,50],[83,53,66,51],[84,8,67,6],[84,14,67,12,"logout"],[84,20,67,18],[84,21,67,19],[84,22,67,20],[85,6,68,4],[86,4,69,2],[86,5,69,3],[87,4,71,2],[87,10,71,8,"login"],[87,15,71,13],[87,18,71,16],[87,24,71,16,"login"],[87,25,71,23,"email"],[87,30,71,36],[87,32,71,38,"password"],[87,40,71,54],[87,45,71,59],[88,6,72,4],[88,12,72,10,"response"],[88,20,72,18],[88,23,72,21],[88,29,72,27,"axios"],[88,34,72,32],[88,35,72,32,"default"],[88,42,72,32],[88,43,72,33,"post"],[88,47,72,37],[88,48,72,38],[88,51,72,41,"API_URL"],[88,58,72,48],[88,75,72,65],[88,77,72,67],[89,8,73,6,"email"],[89,13,73,11],[90,8,74,6,"password"],[91,6,75,4],[91,7,75,5],[91,8,75,6],[92,6,76,4],[92,12,76,10],[93,8,76,12,"access_token"],[93,20,76,24],[94,8,76,26,"user"],[94,12,76,30],[94,14,76,32,"userData"],[95,6,76,41],[95,7,76,42],[95,10,76,45,"response"],[95,18,76,53],[95,19,76,54,"data"],[95,23,76,58],[96,6,77,4],[96,12,77,10,"SecureStore"],[96,23,77,21],[96,24,77,22,"setItemAsync"],[96,36,77,34],[96,37,77,35],[96,49,77,47],[96,51,77,49,"access_token"],[96,63,77,61],[96,64,77,62],[97,6,78,4,"setToken"],[97,14,78,12],[97,15,78,13,"access_token"],[97,27,78,25],[97,28,78,26],[98,6,79,4,"setUser"],[98,13,79,11],[98,14,79,12,"userData"],[98,22,79,20],[98,23,79,21],[99,4,80,2],[99,5,80,3],[100,4,82,2],[100,10,82,8,"register"],[100,18,82,16],[100,21,82,19],[100,27,82,19,"register"],[100,28,82,26,"name"],[100,32,82,38],[100,34,82,40,"email"],[100,39,82,53],[100,41,82,55,"password"],[100,49,82,71],[100,51,82,73,"language"],[100,59,82,89],[100,62,82,92],[100,66,82,96],[100,71,82,101],[101,6,83,4],[101,12,83,10,"response"],[101,20,83,18],[101,23,83,21],[101,29,83,27,"axios"],[101,34,83,32],[101,35,83,32,"default"],[101,42,83,32],[101,43,83,33,"post"],[101,47,83,37],[101,48,83,38],[101,51,83,41,"API_URL"],[101,58,83,48],[101,78,83,68],[101,80,83,70],[102,8,84,6,"name"],[102,12,84,10],[103,8,85,6,"email"],[103,13,85,11],[104,8,86,6,"password"],[104,16,86,14],[105,8,87,6,"language"],[106,6,88,4],[106,7,88,5],[106,8,88,6],[107,6,89,4],[107,12,89,10],[108,8,89,12,"access_token"],[108,20,89,24],[109,8,89,26,"user"],[109,12,89,30],[109,14,89,32,"userData"],[110,6,89,41],[110,7,89,42],[110,10,89,45,"response"],[110,18,89,53],[110,19,89,54,"data"],[110,23,89,58],[111,6,90,4],[111,12,90,10,"SecureStore"],[111,23,90,21],[111,24,90,22,"setItemAsync"],[111,36,90,34],[111,37,90,35],[111,49,90,47],[111,51,90,49,"access_token"],[111,63,90,61],[111,64,90,62],[112,6,91,4,"setToken"],[112,14,91,12],[112,15,91,13,"access_token"],[112,27,91,25],[112,28,91,26],[113,6,92,4,"setUser"],[113,13,92,11],[113,14,92,12,"userData"],[113,22,92,20],[113,23,92,21],[114,4,93,2],[114,5,93,3],[115,4,95,2],[115,10,95,8,"logout"],[115,16,95,14],[115,19,95,17],[115,25,95,17,"logout"],[115,26,95,17],[115,31,95,29],[116,6,96,4],[116,12,96,10,"SecureStore"],[116,23,96,21],[116,24,96,22,"deleteItemAsync"],[116,39,96,37],[116,40,96,38],[116,52,96,50],[116,53,96,51],[117,6,97,4,"setToken"],[117,14,97,12],[117,15,97,13],[117,19,97,17],[117,20,97,18],[118,6,98,4,"setUser"],[118,13,98,11],[118,14,98,12],[118,18,98,16],[118,19,98,17],[119,4,99,2],[119,5,99,3],[120,4,101,2],[120,10,101,8,"updateProfile"],[120,23,101,21],[120,26,101,24],[120,32,101,31,"profile"],[120,39,101,43],[120,43,101,48],[121,6,102,4],[121,10,102,8],[121,11,102,9,"token"],[121,16,102,14],[121,18,102,16],[122,6,103,4],[122,12,103,10,"response"],[122,20,103,18],[122,23,103,21],[122,29,103,27,"axios"],[122,34,103,32],[122,35,103,32,"default"],[122,42,103,32],[122,43,103,33,"put"],[122,46,103,36],[122,47,103,37],[122,50,103,40,"API_URL"],[122,57,103,47],[122,71,103,61],[122,73,103,63,"profile"],[122,80,103,70],[122,82,103,72],[123,8,104,6,"headers"],[123,15,104,13],[123,17,104,15],[124,10,104,17,"Authorization"],[124,23,104,30],[124,25,104,32],[124,35,104,42,"token"],[124,40,104,47],[125,8,104,50],[126,6,105,4],[126,7,105,5],[126,8,105,6],[127,6,106,4,"setUser"],[127,13,106,11],[127,14,106,12,"response"],[127,22,106,20],[127,23,106,21,"data"],[127,27,106,25],[127,28,106,26],[128,4,107,2],[128,5,107,3],[129,4,109,2],[129,10,109,8,"refreshUser"],[129,21,109,19],[129,24,109,22],[129,30,109,22,"refreshUser"],[129,31,109,22],[129,36,109,34],[130,6,110,4],[130,10,110,8,"token"],[130,15,110,13],[130,17,110,15],[131,8,111,6],[131,14,111,12,"fetchUser"],[131,23,111,21],[131,24,111,22,"token"],[131,29,111,27],[131,30,111,28],[132,6,112,4],[133,4,113,2],[133,5,113,3],[134,4,115,2],[134,24,116,4],[134,28,116,4,"_reactJsxDevRuntime"],[134,47,116,4],[134,48,116,4,"jsxDEV"],[134,54,116,4],[134,56,116,5,"AuthContext"],[134,67,116,16],[134,68,116,17,"Provider"],[134,76,116,25],[135,6,116,26,"value"],[135,11,116,31],[135,13,116,33],[136,8,116,35,"user"],[136,12,116,39],[137,8,116,41,"token"],[137,13,116,46],[138,8,116,48,"isLoading"],[138,17,116,57],[139,8,116,59,"login"],[139,13,116,64],[140,8,116,66,"register"],[140,16,116,74],[141,8,116,76,"logout"],[141,14,116,82],[142,8,116,84,"updateProfile"],[142,21,116,97],[143,8,116,99,"refreshUser"],[144,6,116,111],[144,7,116,113],[145,6,116,113,"children"],[145,14,116,113],[145,16,117,7,"children"],[146,4,117,15],[147,6,117,15,"fileName"],[147,14,117,15],[147,16,117,15,"_jsxFileName"],[147,28,117,15],[148,6,117,15,"lineNumber"],[148,16,117,15],[149,6,117,15,"columnNumber"],[149,18,117,15],[150,4,117,15],[150,11,118,26],[150,12,118,27],[151,2,120,0],[151,3,120,1],[152,2,120,2,"_s"],[152,4,120,2],[152,5,36,13,"AuthProvider"],[152,17,36,25],[153,2,36,25,"_c"],[153,4,36,25],[153,7,36,13,"AuthProvider"],[153,19,36,25],[154,2,122,7],[154,8,122,13,"useAuth"],[154,15,122,20],[154,18,122,23,"useAuth"],[154,19,122,23],[154,24,122,29],[155,4,122,29,"_s2"],[155,7,122,29],[156,4,123,2],[156,10,123,8,"context"],[156,17,123,15],[156,20,123,18],[156,24,123,18,"useContext"],[156,30,123,28],[156,31,123,28,"useContext"],[156,41,123,28],[156,43,123,29,"AuthContext"],[156,54,123,40],[156,55,123,41],[157,4,124,2],[157,8,124,6],[157,9,124,7,"context"],[157,16,124,14],[157,18,124,16],[158,6,125,4],[158,12,125,10],[158,16,125,14,"Error"],[158,21,125,19],[158,22,125,20],[158,64,125,62],[158,65,125,63],[159,4,126,2],[160,4,127,2],[160,11,127,9,"context"],[160,18,127,16],[161,2,128,0],[161,3,128,1],[162,2,128,2,"_s2"],[162,5,128,2],[162,6,122,13,"useAuth"],[162,13,122,20],[163,2,122,20],[163,6,122,20,"_c"],[163,8,122,20],[164,2,122,20,"$RefreshReg$"],[164,14,122,20],[164,15,122,20,"_c"],[164,17,122,20],[165,0,122,20],[165,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUser","login","register","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;4BCmC;YCK;GDE;yBEE;GFY;oBGE;GHU;gBIE;GJS;mBKE;GLW;iBME;GNI;wBOE;GPM;sBQE;GRI;CDO;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}