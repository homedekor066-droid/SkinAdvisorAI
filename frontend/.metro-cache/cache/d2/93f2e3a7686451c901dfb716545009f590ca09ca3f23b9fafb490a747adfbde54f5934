{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":49,"index":139}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":140},"end":{"line":3,"column":26,"index":166}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _expoSecureStore = require(_dependencyMap[2], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await SecureStore.getItemAsync('auth_token');\n        if (storedToken) {\n          setToken(storedToken);\n          await fetchUser(storedToken);\n        }\n      } catch (error) {\n        console.error('Failed to load auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const fetchUser = async authToken => {\n      try {\n        const response = await axios.default.get(`${API_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Failed to fetch user:', error);\n        await logout();\n      }\n    };\n    const login = async (email, password) => {\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await SecureStore.setItemAsync('auth_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (name, email, password, language = 'en') => {\n      const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n        name,\n        email,\n        password,\n        language\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await SecureStore.setItemAsync('auth_token', access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await SecureStore.deleteItemAsync('auth_token');\n      setToken(null);\n      setUser(null);\n    };\n    const updateProfile = async profile => {\n      if (!token) return;\n      const response = await axios.default.put(`${API_URL}/api/profile`, profile, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUser(response.data);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        await fetchUser(token);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":165,"map":[[30,2,34,0,"Object"],[30,8,34,0],[30,9,34,0,"defineProperty"],[30,23,34,0],[30,24,34,0,"exports"],[30,31,34,0],[31,4,34,0,"enumerable"],[31,14,34,0],[32,4,34,0,"get"],[32,7,34,0],[32,18,34,0,"get"],[32,19,34,0],[33,6,34,0],[33,13,34,0,"AuthProvider"],[33,25,34,0],[34,4,34,0],[35,2,34,0],[36,2,120,0,"Object"],[36,8,120,0],[36,9,120,0,"defineProperty"],[36,23,120,0],[36,24,120,0,"exports"],[36,31,120,0],[37,4,120,0,"enumerable"],[37,14,120,0],[38,4,120,0,"get"],[38,7,120,0],[38,18,120,0,"get"],[38,19,120,0],[39,6,120,0],[39,13,120,0,"useAuth"],[39,20,120,0],[40,4,120,0],[41,2,120,0],[42,2,126,2],[42,6,126,2,"_expoVirtualEnv"],[42,21,126,2],[42,24,126,2,"require"],[42,31,126,2],[42,32,126,2,"_dependencyMap"],[42,46,126,2],[43,2,1,0],[43,6,1,0,"_react"],[43,12,1,0],[43,15,1,0,"require"],[43,22,1,0],[43,23,1,0,"_dependencyMap"],[43,37,1,0],[44,2,2,0],[44,6,2,0,"_expoSecureStore"],[44,22,2,0],[44,25,2,0,"require"],[44,32,2,0],[44,33,2,0,"_dependencyMap"],[44,47,2,0],[45,2,2,0],[45,6,2,0,"SecureStore"],[45,17,2,0],[45,20,2,0,"_interopNamespace"],[45,37,2,0],[45,38,2,0,"_expoSecureStore"],[45,54,2,0],[46,2,3,0],[46,6,3,0,"_axios"],[46,12,3,0],[46,15,3,0,"require"],[46,22,3,0],[46,23,3,0,"_dependencyMap"],[46,37,3,0],[47,2,3,0],[47,6,3,0,"axios"],[47,11,3,0],[47,14,3,0,"_interopDefault"],[47,29,3,0],[47,30,3,0,"_axios"],[47,36,3,0],[48,2,3,26],[48,6,3,26,"_reactJsxDevRuntime"],[48,25,3,26],[48,28,3,26,"require"],[48,35,3,26],[48,36,3,26,"_dependencyMap"],[48,50,3,26],[49,2,5,0],[49,8,5,6,"API_URL"],[49,15,5,13],[49,18,5,16,"_expoVirtualEnv"],[49,33,5,16],[49,34,5,16,"env"],[49,37,5,16],[49,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[49,61,5,16],[49,65,5,55],[49,67,5,57],[50,2,32,0],[50,8,32,6,"AuthContext"],[50,19,32,17],[50,35,32,20],[50,39,32,20,"createContext"],[50,45,32,33],[50,46,32,33,"createContext"],[50,59,32,33],[50,61,32,63,"undefined"],[50,70,32,72],[50,71,32,73],[51,2,34,7],[51,8,34,13,"AuthProvider"],[51,20,34,25],[51,23,34,28,"AuthProvider"],[51,24,34,29],[52,4,34,31,"children"],[53,2,34,65],[53,3,34,66],[53,8,34,71],[54,4,34,71,"_s"],[54,6,34,71],[55,4,35,2],[55,10,35,8],[55,11,35,9,"user"],[55,15,35,13],[55,17,35,15,"setUser"],[55,24,35,22],[55,25,35,23],[55,28,35,26],[55,32,35,26,"useState"],[55,38,35,34],[55,39,35,34,"useState"],[55,47,35,34],[55,49,35,48],[55,53,35,52],[55,54,35,53],[56,4,36,2],[56,10,36,8],[56,11,36,9,"token"],[56,16,36,14],[56,18,36,16,"setToken"],[56,26,36,24],[56,27,36,25],[56,30,36,28],[56,34,36,28,"useState"],[56,40,36,36],[56,41,36,36,"useState"],[56,49,36,36],[56,51,36,52],[56,55,36,56],[56,56,36,57],[57,4,37,2],[57,10,37,8],[57,11,37,9,"isLoading"],[57,20,37,18],[57,22,37,20,"setIsLoading"],[57,34,37,32],[57,35,37,33],[57,38,37,36],[57,42,37,36,"useState"],[57,48,37,44],[57,49,37,44,"useState"],[57,57,37,44],[57,59,37,45],[57,63,37,49],[57,64,37,50],[58,4,39,2],[58,8,39,2,"useEffect"],[58,14,39,11],[58,15,39,11,"useEffect"],[58,24,39,11],[58,26,39,12],[58,32,39,18],[59,6,40,4,"loadStoredAuth"],[59,20,40,18],[59,21,40,19],[59,22,40,20],[60,4,41,2],[60,5,41,3],[60,7,41,5],[60,9,41,7],[60,10,41,8],[61,4,43,2],[61,10,43,8,"loadStoredAuth"],[61,24,43,22],[61,27,43,25],[61,33,43,25,"loadStoredAuth"],[61,34,43,25],[61,39,43,37],[62,6,44,4],[62,10,44,8],[63,8,45,6],[63,14,45,12,"storedToken"],[63,25,45,23],[63,28,45,26],[63,34,45,32,"SecureStore"],[63,45,45,43],[63,46,45,44,"getItemAsync"],[63,58,45,56],[63,59,45,57],[63,71,45,69],[63,72,45,70],[64,8,46,6],[64,12,46,10,"storedToken"],[64,23,46,21],[64,25,46,23],[65,10,47,8,"setToken"],[65,18,47,16],[65,19,47,17,"storedToken"],[65,30,47,28],[65,31,47,29],[66,10,48,8],[66,16,48,14,"fetchUser"],[66,25,48,23],[66,26,48,24,"storedToken"],[66,37,48,35],[66,38,48,36],[67,8,49,6],[68,6,50,4],[68,7,50,5],[68,8,50,6],[68,15,50,13,"error"],[68,20,50,18],[68,22,50,20],[69,8,51,6,"console"],[69,15,51,13],[69,16,51,14,"error"],[69,21,51,19],[69,22,51,20],[69,44,51,42],[69,46,51,44,"error"],[69,51,51,49],[69,52,51,50],[70,6,52,4],[70,7,52,5],[70,16,52,14],[71,8,53,6,"setIsLoading"],[71,20,53,18],[71,21,53,19],[71,26,53,24],[71,27,53,25],[72,6,54,4],[73,4,55,2],[73,5,55,3],[74,4,57,2],[74,10,57,8,"fetchUser"],[74,19,57,17],[74,22,57,20],[74,28,57,27,"authToken"],[74,37,57,44],[74,41,57,49],[75,6,58,4],[75,10,58,8],[76,8,59,6],[76,14,59,12,"response"],[76,22,59,20],[76,25,59,23],[76,31,59,29,"axios"],[76,36,59,34],[76,37,59,34,"default"],[76,44,59,34],[76,45,59,35,"get"],[76,48,59,38],[76,49,59,39],[76,52,59,42,"API_URL"],[76,59,59,49],[76,73,59,63],[76,75,59,65],[77,10,60,8,"headers"],[77,17,60,15],[77,19,60,17],[78,12,60,19,"Authorization"],[78,25,60,32],[78,27,60,34],[78,37,60,44,"authToken"],[78,46,60,53],[79,10,60,56],[80,8,61,6],[80,9,61,7],[80,10,61,8],[81,8,62,6,"setUser"],[81,15,62,13],[81,16,62,14,"response"],[81,24,62,22],[81,25,62,23,"data"],[81,29,62,27],[81,30,62,28],[82,6,63,4],[82,7,63,5],[82,8,63,6],[82,15,63,13,"error"],[82,20,63,18],[82,22,63,20],[83,8,64,6,"console"],[83,15,64,13],[83,16,64,14,"error"],[83,21,64,19],[83,22,64,20],[83,45,64,43],[83,47,64,45,"error"],[83,52,64,50],[83,53,64,51],[84,8,65,6],[84,14,65,12,"logout"],[84,20,65,18],[84,21,65,19],[84,22,65,20],[85,6,66,4],[86,4,67,2],[86,5,67,3],[87,4,69,2],[87,10,69,8,"login"],[87,15,69,13],[87,18,69,16],[87,24,69,16,"login"],[87,25,69,23,"email"],[87,30,69,36],[87,32,69,38,"password"],[87,40,69,54],[87,45,69,59],[88,6,70,4],[88,12,70,10,"response"],[88,20,70,18],[88,23,70,21],[88,29,70,27,"axios"],[88,34,70,32],[88,35,70,32,"default"],[88,42,70,32],[88,43,70,33,"post"],[88,47,70,37],[88,48,70,38],[88,51,70,41,"API_URL"],[88,58,70,48],[88,75,70,65],[88,77,70,67],[89,8,71,6,"email"],[89,13,71,11],[90,8,72,6,"password"],[91,6,73,4],[91,7,73,5],[91,8,73,6],[92,6,74,4],[92,12,74,10],[93,8,74,12,"access_token"],[93,20,74,24],[94,8,74,26,"user"],[94,12,74,30],[94,14,74,32,"userData"],[95,6,74,41],[95,7,74,42],[95,10,74,45,"response"],[95,18,74,53],[95,19,74,54,"data"],[95,23,74,58],[96,6,75,4],[96,12,75,10,"SecureStore"],[96,23,75,21],[96,24,75,22,"setItemAsync"],[96,36,75,34],[96,37,75,35],[96,49,75,47],[96,51,75,49,"access_token"],[96,63,75,61],[96,64,75,62],[97,6,76,4,"setToken"],[97,14,76,12],[97,15,76,13,"access_token"],[97,27,76,25],[97,28,76,26],[98,6,77,4,"setUser"],[98,13,77,11],[98,14,77,12,"userData"],[98,22,77,20],[98,23,77,21],[99,4,78,2],[99,5,78,3],[100,4,80,2],[100,10,80,8,"register"],[100,18,80,16],[100,21,80,19],[100,27,80,19,"register"],[100,28,80,26,"name"],[100,32,80,38],[100,34,80,40,"email"],[100,39,80,53],[100,41,80,55,"password"],[100,49,80,71],[100,51,80,73,"language"],[100,59,80,89],[100,62,80,92],[100,66,80,96],[100,71,80,101],[101,6,81,4],[101,12,81,10,"response"],[101,20,81,18],[101,23,81,21],[101,29,81,27,"axios"],[101,34,81,32],[101,35,81,32,"default"],[101,42,81,32],[101,43,81,33,"post"],[101,47,81,37],[101,48,81,38],[101,51,81,41,"API_URL"],[101,58,81,48],[101,78,81,68],[101,80,81,70],[102,8,82,6,"name"],[102,12,82,10],[103,8,83,6,"email"],[103,13,83,11],[104,8,84,6,"password"],[104,16,84,14],[105,8,85,6,"language"],[106,6,86,4],[106,7,86,5],[106,8,86,6],[107,6,87,4],[107,12,87,10],[108,8,87,12,"access_token"],[108,20,87,24],[109,8,87,26,"user"],[109,12,87,30],[109,14,87,32,"userData"],[110,6,87,41],[110,7,87,42],[110,10,87,45,"response"],[110,18,87,53],[110,19,87,54,"data"],[110,23,87,58],[111,6,88,4],[111,12,88,10,"SecureStore"],[111,23,88,21],[111,24,88,22,"setItemAsync"],[111,36,88,34],[111,37,88,35],[111,49,88,47],[111,51,88,49,"access_token"],[111,63,88,61],[111,64,88,62],[112,6,89,4,"setToken"],[112,14,89,12],[112,15,89,13,"access_token"],[112,27,89,25],[112,28,89,26],[113,6,90,4,"setUser"],[113,13,90,11],[113,14,90,12,"userData"],[113,22,90,20],[113,23,90,21],[114,4,91,2],[114,5,91,3],[115,4,93,2],[115,10,93,8,"logout"],[115,16,93,14],[115,19,93,17],[115,25,93,17,"logout"],[115,26,93,17],[115,31,93,29],[116,6,94,4],[116,12,94,10,"SecureStore"],[116,23,94,21],[116,24,94,22,"deleteItemAsync"],[116,39,94,37],[116,40,94,38],[116,52,94,50],[116,53,94,51],[117,6,95,4,"setToken"],[117,14,95,12],[117,15,95,13],[117,19,95,17],[117,20,95,18],[118,6,96,4,"setUser"],[118,13,96,11],[118,14,96,12],[118,18,96,16],[118,19,96,17],[119,4,97,2],[119,5,97,3],[120,4,99,2],[120,10,99,8,"updateProfile"],[120,23,99,21],[120,26,99,24],[120,32,99,31,"profile"],[120,39,99,43],[120,43,99,48],[121,6,100,4],[121,10,100,8],[121,11,100,9,"token"],[121,16,100,14],[121,18,100,16],[122,6,101,4],[122,12,101,10,"response"],[122,20,101,18],[122,23,101,21],[122,29,101,27,"axios"],[122,34,101,32],[122,35,101,32,"default"],[122,42,101,32],[122,43,101,33,"put"],[122,46,101,36],[122,47,101,37],[122,50,101,40,"API_URL"],[122,57,101,47],[122,71,101,61],[122,73,101,63,"profile"],[122,80,101,70],[122,82,101,72],[123,8,102,6,"headers"],[123,15,102,13],[123,17,102,15],[124,10,102,17,"Authorization"],[124,23,102,30],[124,25,102,32],[124,35,102,42,"token"],[124,40,102,47],[125,8,102,50],[126,6,103,4],[126,7,103,5],[126,8,103,6],[127,6,104,4,"setUser"],[127,13,104,11],[127,14,104,12,"response"],[127,22,104,20],[127,23,104,21,"data"],[127,27,104,25],[127,28,104,26],[128,4,105,2],[128,5,105,3],[129,4,107,2],[129,10,107,8,"refreshUser"],[129,21,107,19],[129,24,107,22],[129,30,107,22,"refreshUser"],[129,31,107,22],[129,36,107,34],[130,6,108,4],[130,10,108,8,"token"],[130,15,108,13],[130,17,108,15],[131,8,109,6],[131,14,109,12,"fetchUser"],[131,23,109,21],[131,24,109,22,"token"],[131,29,109,27],[131,30,109,28],[132,6,110,4],[133,4,111,2],[133,5,111,3],[134,4,113,2],[134,24,114,4],[134,28,114,4,"_reactJsxDevRuntime"],[134,47,114,4],[134,48,114,4,"jsxDEV"],[134,54,114,4],[134,56,114,5,"AuthContext"],[134,67,114,16],[134,68,114,17,"Provider"],[134,76,114,25],[135,6,114,26,"value"],[135,11,114,31],[135,13,114,33],[136,8,114,35,"user"],[136,12,114,39],[137,8,114,41,"token"],[137,13,114,46],[138,8,114,48,"isLoading"],[138,17,114,57],[139,8,114,59,"login"],[139,13,114,64],[140,8,114,66,"register"],[140,16,114,74],[141,8,114,76,"logout"],[141,14,114,82],[142,8,114,84,"updateProfile"],[142,21,114,97],[143,8,114,99,"refreshUser"],[144,6,114,111],[144,7,114,113],[145,6,114,113,"children"],[145,14,114,113],[145,16,115,7,"children"],[146,4,115,15],[147,6,115,15,"fileName"],[147,14,115,15],[147,16,115,15,"_jsxFileName"],[147,28,115,15],[148,6,115,15,"lineNumber"],[148,16,115,15],[149,6,115,15,"columnNumber"],[149,18,115,15],[150,4,115,15],[150,11,116,26],[150,12,116,27],[151,2,118,0],[151,3,118,1],[152,2,118,2,"_s"],[152,4,118,2],[152,5,34,13,"AuthProvider"],[152,17,34,25],[153,2,34,25,"_c"],[153,4,34,25],[153,7,34,13,"AuthProvider"],[153,19,34,25],[154,2,120,7],[154,8,120,13,"useAuth"],[154,15,120,20],[154,18,120,23,"useAuth"],[154,19,120,23],[154,24,120,29],[155,4,120,29,"_s2"],[155,7,120,29],[156,4,121,2],[156,10,121,8,"context"],[156,17,121,15],[156,20,121,18],[156,24,121,18,"useContext"],[156,30,121,28],[156,31,121,28,"useContext"],[156,41,121,28],[156,43,121,29,"AuthContext"],[156,54,121,40],[156,55,121,41],[157,4,122,2],[157,8,122,6],[157,9,122,7,"context"],[157,16,122,14],[157,18,122,16],[158,6,123,4],[158,12,123,10],[158,16,123,14,"Error"],[158,21,123,19],[158,22,123,20],[158,64,123,62],[158,65,123,63],[159,4,124,2],[160,4,125,2],[160,11,125,9,"context"],[160,18,125,16],[161,2,126,0],[161,3,126,1],[162,2,126,2,"_s2"],[162,5,126,2],[162,6,120,13,"useAuth"],[162,13,120,20],[163,2,120,20],[163,6,120,20,"_c"],[163,8,120,20],[164,2,120,20,"$RefreshReg$"],[164,14,120,20],[164,15,120,20,"_c"],[164,17,120,20],[165,0,120,20],[165,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUser","login","register","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;4BCiC;YCK;GDE;yBEE;GFY;oBGE;GHU;gBIE;GJS;mBKE;GLW;iBME;GNI;wBOE;GPM;sBQE;GRI;CDO;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}